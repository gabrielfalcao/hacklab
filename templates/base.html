<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<?python
def pluralize(what, singular="", plural="s"):
    if what == 1:
        return singular
    return plural
?>
<html xmlns="http://www.w3.org/1999/xhtml"
           xmlns:py="http://genshi.edgewall.org/"
           xmlns:xi="http://www.w3.org/2001/XInclude"
           lang="en">
  <head py:match="head" py:attrs="select('@*')">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
      <title py:replace="select('title|text()')">Hacklab</title>
    <link rel="stylesheet" href="/media/css/reset.css" />
    <link rel="stylesheet" href="/media/css/text.css" />
    <link rel="stylesheet" href="/media/css/960.css" />
    <link rel="stylesheet" href="/media/css/jquery-ui.css" />
    <link rel="stylesheet" href="/media/css/main.css" />
    <link rel="stylesheet" href="/media/css/jquery.treeview.css" />
    <script src="/media/js/jquery.js" type="text/javascript"></script>
    <script src="/media/js/jquery.ui.js" type="text/javascript"></script>
    <script src="/media/js/jquery.form.js" type="text/javascript"></script>
    <script src="/media/js/jquery.shout.js" type="text/javascript"></script>
    <script src="/media/js/jquery.validate.js" type="text/javascript"></script>
    <script src="/media/js/jquery.treeview.js" type="text/javascript"></script>
    <script src="/media/js/jquery.treeview.async.js" type="text/javascript"></script>
    <script src="/media/js/hacklab.js" type="text/javascript"></script>
    ${select("*|text()")}
  </head>
  <body py:match="body" py:attrs="select('@*')">
    <div id="header" class="container_16">
      <div id="top" class="grid_3">
	<a href="/dashboard">
	  <img src="/media/img/logo.png" class="logo" alt="HackLab logo" />
	</a>
      </div>
      <div id="user-box" class="grid_5" py:if="defined('user')">
	<div id="user-pic">
	  <img src="${user.get_gravatar()}" width="48" height="48"/>
	</div>
	<div id="user-meta">
	  <span class="big">${user.name}</span>
	  <div class="line"><span id="total-of-repositories">${user.total_of_repositories}</span> repositor${pluralize(user.total_of_repositories, "y", "ies")}</div>
	  <div class="line"><span id="total-of-keys">${user.total_of_keys}</span> key${pluralize(user.total_of_repositories)}</div>
	  <!--! <span class="mini">10 followers</span> -->
	</div>
      </div>
    </div>

    <!-- absolute elements -->
    <div id="actions-sticker" py:if="defined('user')">
      <div class="content">
	<a href="/user/account">account management</a>
	<a href="/user/logout">logout</a>
      </div>
      <div class="label">
	<a href="#actions">actions</a>
      </div>
    </div>
    <div id="top-message">
      <span id="top-message-text" class="success">asd</span>
    </div>
    <!-- end of absolute elements -->

    <div py:replace="select('*|text()')">This page has no content.</div>

  </body>
</html>
